# NoSQL和关系型数据库区别
1.RDMS 是 为存储进行优化，存储范式化的数据，尽量减少了存储空间的使用，同时构建了非常强大的查询能力。NoSQL 对计算资源进行了优化，以存储空间换计算时间。数据表中直接存储了非范式化的数据，可以直接拿出来使用。
2.扩展
RDMS 是垂直扩展（加机器CPU内存），DDB是水平扩展（加机器数量）。
3.RDMS 是强一致性，但DDB是最终一致性
4.RDMS 支持join功能，而NoSQL不支持join功能。

P.S.这里NoSQL以DynamoDB为例。

# DynamoDB
DDB一张表包含一个partion key（可以理解为主键） 和 sort key，表里的每一条数据就是一个文档，采用json格式。

Partition Key 的作用是将数据分散到不同的分区(Partition)里，构建无序的哈希索引，Sort Key的作用是将同一个分区中的数据按照一定的顺序排列起来，便于查找。

全局二级索引GSI
几乎相当于一个全新的表，除了与原表共用同一个表名之外，GSI 使用了新的 Partition Key 和 Sort Key, 有自己独立的 Partition, 计算读写数量时也与原表相互独立。GSI 会在原表发生改变的时候，通过流(Stream)将更新同步到 GSI 中。

DDB Stream
DynamoDB 中的数据在发生变化时，均会发送相应的事件流。

DDB是AP数据库
通常主表会有三个备份，默认情况下写入到两个副本中即认为写入成功，因此在高频读取时也有一定的概率读到未完成写入的数据。GSI 读写会产生一致性的原因是 GSI 和主表实际是 两个不同的存储，写入到主表的数据会通过流同步到GSI，这个过程会存在一定的延时（10ms级别）。