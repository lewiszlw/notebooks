# Redis过期策略
**1.定期删除**

redis 默认是每隔 100ms 就随机抽取一些设置了过期时间的 key，检查其是否过期，如果过期就删除。

**2.惰性删除**

在获取某个 key 的时候，redis 会检查一下 ，如果这个 key 设置了过期时间，并且已经过期了，那么就直接删除，返回空。

ps.如果大量的key没有被扫描到，且已过期，也没有被再次访问，即没有走惰性删除，这些大量过期 key 堆积在内存里，导致 redis 内存块耗尽了：redis提供内存淘汰机制（如LRU）。

# Redis优缺点
优点：
1. 数据存放在内存中，读写速度很快，采用单线程结构，防止了因多线程竞争可能出现的问题和消耗。
2. 数据类型丰富，五种基础数据类型，并且有很多很有用的扩展数据类型，如位图，HyperLogLog，发布订阅，GEO 等。
3. 功能丰富，提供键过期，简单事务，Lua 脚本管理，Pipeline 等功能。
4. 数据可持久化，可通过 RDB 和 AOF 两种方式进行数据持久化。
5. 提供主从复制，可利用集群，哨兵构建高可用的分布式架构。

缺点：
1. 不具备自动容错和恢复功能。
2. 主机宕机，宕机未同步到从机的数据无法恢复。
3. 主从复制采用全量复制，若快照文件过大，对集群的服务能力会产生较大影响。
4. 难以支持在线扩容。